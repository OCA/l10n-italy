.. image:: https://img.shields.io/badge/licence-AGPL--3-blue.svg
   :target: https://www.gnu.org/licenses/agpl-3.0-standalone.html
   :alt: License: AGPL-3

===================
Fiscal year closing
===================

This module implements a generic fiscal year closing system for those
countries where closing/opening moves or other kind of closing operations are
mandatory in accounting books.

It includes a template mechanism that can be used in localizations for
providing the possible configurations to be used by the closing engine.

Configuration
=============

If you want to add a closing template or check existing ones:

#. Go to *Accounting > Configuration > Fiscal year closing > Closing templates*.
#. Click on Create.
#. Put a name for the template.
#. Mark if you want to check if there's any draft move in the date range
   before making the closing operations.
#. Select the chart templates for which companies that have this chart you want
   this template to be available for.
#. Add one line for each of the journal entries you want to create on the
   closing operation.
#. This line has a name, a code, an optional journal (selectable per company),
   a sequence for ordering this line with the others, and the type we want to
   assign on the resulting journal entry created.
#. Then you can configure accounts for being mapped on the section
   "Accounts mapping".
#. If you put a destination account on each mapping line, then the balance of
   the source account will be transferred to that account.
#. If there's no destination account, then the balance of the account will be
   nullified through one or several journal items with the opposite balance.
#. The way these opposite journal items will be created is determined by the
   closing type in the section "Account closing types":

   * Balance: There will be only one journal item with the opposite balance.
   * Un-reconciled: The opposite balance will be grouped by the partner field
     in the period journal entries.

#. There's a default closing type to use, and you can specify others by
   account type.
#. You can configure a closing operation for being the reverse move of another
   previous move generated by a closing operation (typically, the opening
   move after the closing one). For making that, fill the "Inverse config"
   field with the code of the closing operation you want to reverse, and
   place this operation after that one (not necessarily immediately after).
#. If you also want to reconcile the balances of the inverted journal items and
   the initial ones, click on the check "Reconcile".

You can check l10n_es_account_fiscal_year_closing in OCA/l10n-spain for several
examples of closing templates.

Usage
=====

For closing a fiscal year:

#. Go to *Accounting > Adviser > Fiscal year closings*
#. Click on create.
#. Select the year for which you want to perform the closing. If your fiscal
   year doesn't coincide with a natural year, input the last year of both of
   the involved years.
#. Select the closing template you want to use.
#. Click on "Calculate".
#. Check the result clicking on the "Show Moves" or "Show Move Lines" buttons.
#. If everything is OK, then click on "Confirm and post moves" for finishing
   the closing, posting and reconciling the journal entries.
#. You can cancel the closing in any moment pressing "Cancel" button, which
   unreconciles and removes closing journal entries.
#. If one of the created journal entries is unbalanced, as Odoo doesn't allow
   to create unbalanced entries, a new screen will be shown for checking the
   problem on the created entry.

.. image:: https://odoo-community.org/website/image/ir.attachment/5784_f2813bd/datas
   :alt: Try me on Runbot
   :target: https://runbot.odoo-community.org/runbot/89/10.0


Known issues / Roadmap
======================

* Develop tests.

Bug Tracker
===========

Bugs are tracked on `GitHub Issues
<https://github.com/OCA/account-closing/issues>`_. In case of trouble, please
check there if your issue has already been reported. If you spotted it first,
help us smashing it by providing a detailed and welcomed feedback.

Credits
=======

Images
------

* Odoo Community Association: `Icon <https://github.com/OCA/maintainer-tools/blob/master/template/module/static/description/icon.svg>`_.

Contributors
------------

* Antonio Espinosa <antonio.espinosa@tecnativa.com>
* Pedro M. Baeza <pedro.baeza@tecnativa.com>

Maintainer
----------

.. image:: https://odoo-community.org/logo.png
   :alt: Odoo Community Association
   :target: https://odoo-community.org

This module is maintained by the OCA.

OCA, or the Odoo Community Association, is a nonprofit organization whose
mission is to support the collaborative development of Odoo features and
promote its widespread use.

To contribute to this module, please visit https://odoo-community.org.
