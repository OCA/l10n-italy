<?xml version="1.0" ?>
<openerp>
	<data>

	    <record id="view_rc_type_form" model="ir.ui.view">
            <field name="name">account.rc.type.form</field>
            <field name="model">account.rc.type</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Reverse Charge Type">
                    <group>
                        <group string="Main Informations">
                            <field name="name"/>
                            <field name="method"/>
                            <field name="description"/>
                        </group>
                        <group string="Self Invoicing">
                            <field name="partner_type"
                                attrs="{
                                    'readonly': [('method', '!=', 'selfinvoice')],
                                    'required': [('method', '=', 'selfinvoice')]}"/>
                            <field name="partner_id"
                                attrs="{'readonly': [('method', '!=', 'selfinvoice')],
                                    'invisible': [('partner_type', '!=', 'other')],
                                    'required': [('partner_type', '=', 'other')]}"/>
                            <field name="journal_id"
                                attrs="{
                                    'readonly': [('method', '!=', 'selfinvoice')],
                                    'required': [('method', '=', 'selfinvoice')]}"/>
                            <field name="payment_journal_id"
                                attrs="{
                                    'readonly': [('method', '!=', 'selfinvoice')],
                                    'required': [('method', '=', 'selfinvoice')]}"/>
                            <field name="transitory_account_id"
                                attrs="{
                                    'readonly': [('method', '!=', 'selfinvoice')],
                                    'required': [('method', '=', 'selfinvoice')]}"/>
                            <field name="tax_ids" widget="one2many_list"
                                attrs="{
                                    'readonly': [('method', '!=', 'selfinvoice')],
                                    'required': [('method', '=', 'selfinvoice')]}">
                                <tree string="Tax Mapping" editable="bottom">
                                    <field name="tax_src_id" domain="[('parent_id','=',False)]"/>
                                    <field name="tax_dest_id" domain="[('parent_id','=',False)]"/>
                                </tree>
                            </field>
                        </group>
                        <group string="Text on Invoice">
                            <field name="invoice_text"/>
                        </group>
                        <group string="Text on Self Invoice">
                            <field name="self_invoice_text"
                                attrs="{'readonly': [('method', '!=', 'selfinvoice')]}"/>
                        </group>
                    </group>
                </form>
            </field>
        </record>

        <record id="view_rc_type_tree" model="ir.ui.view">
            <field name="name">account.rc.type.tree</field>
            <field name="model">account.rc.type</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Reverse Charge Types">
                    <field name="name"/>
                    <field name="method"/>
                    <field name="partner_type"/>
                    <field name="journal_id"/>
                    <field name="payment_journal_id"/>
                </tree>
            </field>
        </record>

        <record id="action_rc_type" model="ir.actions.act_window">
            <field name="name">Reverse Charge Types</field>
            <field name="res_model">account.rc.type</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem
            action="action_rc_type" id="menu_action_rc_type" sequence="20"
            parent="account.next_id_27" groups="account.group_account_manager"/>

        <record id="view_fiscal_position_form_rc" model="ir.ui.view">
            <field name="name">account.fiscal.position.form.rc</field>
            <field name="model">account.fiscal.position</field>
            <field name="inherit_id" ref="account.view_account_position_form"/>
            <field name="arch" type="xml">
                <field name="country_group_id" position="after">
                    <field name="rc_type_id" widget="selection"/>
                </field>
            </field>
        </record>

        <record id="view_invoice_supplier_form_rc" model="ir.ui.view">
            <field name="name">account.invoice.supplier.form.rc</field>
            <field name="model">account.invoice</field>
            <field name="inherit_id" ref="account.invoice_supplier_form"/>
            <field name="arch" type="xml">
                <xpath expr="//page[@string='Other Info']" position="inside">
                    <group string="Self Invoicing">
                        <field name="rc_self_invoice_id" readonly="True"
                        domain="[('type', '=', 'out_invoice')]"
                        context="{'form_view_ref': 'account.invoice_form'}"/>
                    </group>
                </xpath>
                <xpath expr="//notebook/page[@string='Invoice']/field[@name='invoice_line']/tree/field[@name='price_subtotal']" position="after">
                    <field name="rc"/>
                </xpath>
            </field>
        </record>

        <record id="view_invoice_form_rc" model="ir.ui.view">
             <field name="name">account.invoice.form.rc</field>
             <field name="model">account.invoice</field>
             <field name="inherit_id" ref="account.invoice_form"/>
             <field name="arch" type="xml">
                <xpath expr="//page[@string='Other Info']" position="inside">
                    <group string="Self Invoicing">
                        <field name="rc_purchase_invoice_id" readonly="True"
                            domain="[('type', '=', 'in_invoice')]"
                            context="{'form_view_ref': 'account.supplier_invoice_form'}"/>
                    </group>
                </xpath>
             </field>
        </record>

    </data>
</openerp>
