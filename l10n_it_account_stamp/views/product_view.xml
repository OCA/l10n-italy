<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <record id="product_template_form_view_account_stamp" model="ir.ui.view">
        <field name="name">product.template.form.inherit</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="account.product_template_form_view" />
        <field name="arch" type="xml">
            <xpath expr="//group[@name='payables']" position="after">
                <group string="Stamp Duty">
                    <field name="l10n_it_account_stamp_is_stamp" />
                    <field
                        name="l10n_it_account_stamp_auto_compute"
                        invisible="not l10n_it_account_stamp_is_stamp"
                    />
                    <p
                        invisible="(not l10n_it_account_stamp_auto_compute) or (not l10n_it_account_stamp_is_stamp)"
                        colspan="2"
                    >
                        For each invoice, the base amount for each selected tax will be added up and used to determine
                        the application of the account stamp.
                    </p>
                    <field
                        name="l10n_it_account_stamp_tax_apply_min_total_base"
                        invisible="(not l10n_it_account_stamp_auto_compute) or (not l10n_it_account_stamp_is_stamp)"
                        required="l10n_it_account_stamp_auto_compute"
                    />
                    <field
                        name="l10n_it_account_stamp_stamp_duty_apply_tax_ids"
                        invisible="(not l10n_it_account_stamp_auto_compute) or (not l10n_it_account_stamp_is_stamp)"
                        widget="many2many_tags"
                    />
                </group>
            </xpath>

            <xpath
                expr="//field[@name='property_account_income_id']"
                position="attributes"
            >
                <attribute name="required">l10n_it_account_stamp_is_stamp</attribute>
            </xpath>

            <xpath
                expr="//field[@name='property_account_expense_id']"
                position="attributes"
            >
                <attribute name="required">l10n_it_account_stamp_is_stamp
                </attribute>
            </xpath>
        </field>
    </record>
</odoo>
